---
author: Longqi
comments: true
date: 2014-12-23 14:43:45
layout: post
slug: ffmpegdoc
title: ffmpeg的中文文档
categories: [Tools]
tags:
- ffmpeg
- Documents
---

网上找了半天除了找到一个完成了十分之一不到的ffmpeg的中文文档之外好像什么也没有找到，隐约记得之前好像看过一次ffmpeg的文档，现在又忘得差不多了，干脆翻译一个放到这里，以供以后查阅。（文档有点篇幅需要一点时间才能完成，而且基本没有考虑用词的准确和优美性，有想优化的同学可以基于这个翻译继续进行。）

ffmpeg的文档

 目录


1概要

2说明

3详细描述

3.1滤波

3.1.1简单filtergraphs

3.1.2复杂filtergraphs

3.2流复制

4流选择

5选项

5.1流符

5.2通用选项

5.3 AVOption选项

5.4主要选项

5.5视频选项

5.6高级视频选项

5.7音频选项

5.8高级音频选项

5.9字幕选项

5.10 高级字幕选项

5.11高级选项

5.12预置文件

6小贴士

7 例子

7.1预置文件

7.2视频和音频抓取

7.3 X11抓取

7.4视频和音频文件格式转换

8参见

9作者


##　1. 概要

`ffmpeg [global_options] {[input_file_options] -i INPUT_FILE} ... {[output_file_options] OUTPUT_FILE} ...`

## 2. 说明

`ffmpeg`是一个非常快的视频和音频转换器，还可以抓取实时的音频/视频流。它可以在任意的采样率之间的转换和调整视频，并同时使用高品质的多相滤波器。

`ffmpeg`从输入“文件”（其可以是常规文件，管道，网络流，录制装置等），由指定任意数量的读取`-i`选项，并写入到任意数量的输出“文件”，只需指定一个输出的文件名。任何一个命令行中不能被解释为选项的内容都被认为是一个输出文件名。

每个输入或输出文件可以在原则上，包含任意数量的不同类型（视频/音频/字幕/附件/数据）的流。输出文件中允许流的数量和类型是由输出格式容器限制决定的。输入流和输出流直接的映射可以自动完成也可以用`-map`选项给定（见流选择章节）。

引用输入文件的选项时，则必须使用他们的索引（从0开始）。例如：第一输入文件是`0` ，第二个是`1`等。类似地，一个文件中的流也通过其索引指定。例如`2:3`指的是在第三个输入文件中的第四数据流。参见流章节。

作为一般规则，选项作用于下一个指定的文件。因此，命令的顺序是重要，你可以在命令行上多次相同的选项。每次选项的出现都将作用于下一个输入或输出文件。这条规则若有例外将会提前声明（例如冗余级别）。

不要混合输入和输出文件。首先指定所有输入文件，那么所有的输出文件。也不要混用属于不同的文件的选项。所有选项仅适用于下一个输入或输出文件，之后选项将被重置。

设置输出文件以64千比特/秒的视频比特率：

`ffmpeg -i input.avi -b：V 64K -bufsize 64K output.avi`

要强制输出文件为24 fps的帧速率：

`ffmpeg -i input.avi -r 24 output.avi`

要强制输入文件的帧频（仅对原始格式有效），以1 FPS读入文件，以每秒24帧的帧速率输出：

`ffmpeg -r 1 -i input.m2v -r 24 output.avi`

`format` 选项可能需要指定，对于原始输入文件。

## 3. 详细描述

在转码过程ffmpeg每个输出可以由以下图描述：

	 _______              ______________
	|       |            |              |
	| input |  demuxer   | encoded data |   decoder
	| file  | ---------> | packets      | -----+
	|_______|            |______________|      |
	                                           v
	                                       _________
	                                      |         |
	                                      | decoded |
	                                      | frames  |
	                                      |_________|
	 ________             ______________       |
	|        |           |              |      |
	| output | <-------- | encoded data | <----+
	| file   |   muxer   | packets      |   encoder
	|________|           |______________|

`ffmpeg`调用libavformat库（含分流器）来读取输入文件并获得含有他们编码信息的数据包。当有多个输入文件， `ffmpeg`将通过跟踪最小的时间戳来试图在所有活跃的输入流间同步。编码的数据包然后被传递到解码器（除非复制音频流被选择用于流，见进一步的说明）。解码器产生的未压缩的帧（原始视频/ PCM音频/ ...），它可以进一步通过滤镜进行处理（见下一节）。通过滤镜后，这些帧被传递到编码器，编码器将其编码并输出编码后的数据包。最后，这些将被传输给混合器以将编码数据写入到输出文件。

### 3.1 滤镜

