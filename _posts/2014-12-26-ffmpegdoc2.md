---
author: Longqi
comments: true
date: 2014-12-26 12:53:27
layout: post
slug: ffmpegdoc2
title: ffmpeg的中文文档（二）
categories: [Tools]
tags:
- ffmpeg
- Documents
---
**由于内容长度过长，第一部分的内容，[点此查看]({% post_url 2014-12-23-ffmpegdoc %})。**

### 5.3 AVOption选项

这些选项直接由`libavformat`，`libavdevice`和`libavcodec`库提供。要查看可用AVOption的列表，请使用`-help`选项。它们被分为两类：

generic
	这些选项可以为任何容器，编解码器或设备进行设置。通用的选项都列在AVFormatContext选择容器/设备和AVCodecContext选择编解码器小节。

private
	这些选项是作用于给定的容器，装置或编解码器。私有选项列在其相应的容器/设备/编解码器。

比如编辑ID3v2.3头而不是默认的ID3v2.4到MP3文件，使用MP3混合器的`id3v2_version`私有选项：

`ffmpeg -i input.flac -id3v2_version 3 out.mp3`

所有编解码器AVOption选项是按流指定的，并且因此应该指定相应的流标识符。

注： `-nooption`语法不能用于布尔AVOption选项，请使用`-option 0/-option 1` 。

注：老的前缀v/a/s的流标识记号已经过时，将被移除。

### 5.4 主要选项

`-f fmt (input/output)`

强制指定输入或输出的文件格式。输入文件的格式通常是自动检测的，输出文件的格式由该文件的扩展名猜测，所以在大多数情况下不需要此选项。

`-i filename (input)`

输入的文件名

`-y (global)`

直接覆盖输出文件。

`-n (global)`

如果指定的输出文件已经存在，不要覆盖输出文件，并立即退出。

`-c[:stream_specifier] codec (input/output,per-stream)`

`-codec[:stream_specifier] codec (input/output,per-stream)`

用于对一个或多个数据流指定一个编码器（一个输出文件之前使用时）或一个解码器（一个输入文件之前使用时）。 codec是一个解码器/编码器的名称或特殊值copy （仅输出），copy表示该流不是被重新编码。

例如

	`ffmpeg -i INPUT -map 0 -c:v libx264 -c:a copy OUTPUT`
	使用libx264编码所有视频流并拷贝所有音频流。

对于每个数据流，最后匹配的`c`选项被应用，所以

	`ffmpeg -i INPUT -map 0 -c copy -c:v:1 libx264 -c:a:137 libvorbis OUTPUT`
	将复制的所有流除了第二视频流，并将用libx264进行编码，并且对于第138个音频流用libvorbis进行编码。

`-t duration (input/output)`

当作为输入选项（在`-i`之前 ），限制从输入文件中读取数据的`duration`。

当作为输出选项（输出文件名之​​前）使用，在达到`duration`后停止写入输出文件。

`duration`可能是以秒为单位，或以`hh:mm:ss[.xxx]`形式出现。

`-to`和`-t`是相互排斥的，`-t`具有优先权。

`-to position (output)`

在`position`位置停止输出。 `position`可能是一个表示秒数的数，或`hh:mm:ss[.xxx]`形式。

`-to`和`-t`是相互排斥的，`-t`具有优先权。

`-fs limit_size (output)`

设置文件大小限制，以字节表示。

`-ss position (input/output)`

当用作输入选项一起使用（在`-i` 以前），跳转到输入文件中`position` 位置。请注意，在大多数的格式是不可能确切定位，这样ffmpeg将寻求最接近的`position`位置点。当转码和`-accurate_seek`启用（默认设置），寻找点和`position`位置之间的附加段将被解码并丢弃。当进行流复制或当`-noaccurate_seek`被使用时，它都将被保留。

当用作输出选项（在输出文件名​​前），解码但丢弃输入直到时间戳到达的位置。

`position`位置可以是秒数或hh:mm:ss[.xxx]形式。

`-itsoffset offset (input)`

设置输入时间偏移。

`offset`必须是持续时间规范，请参阅（ffmpeg-utils）在FFmpeg-utils（1）手动的持续时间段的相关内容 。

偏移被添加到输入文件的时间戳。指定一个正偏移意味着相应流将延迟offset所指定的时间。

`-timestamp date (output)`

设置在容器内记录的时间戳。

date必须是一个规范的持续时间，请参阅（ffmpeg-utils）在FFmpeg-utils的（1）日期部分 。

`-metadata[:metadata_specifier] key=value (output,per-metadata)`

设置元数据的键/值对。

可选`metadata_specifier`可以被用于设置流或章节的元数据。见`-map_metadata`文档的详细信息。

此选项将覆盖`-map_metadata`设置的元数据。另外，也可以通过使用空值来删除元数据。

	例如，设置输出文件的标题：
	`ffmpeg -i in.avi -metadata title="my title" out.flv`

	设置第一个音频流的语言：
	`ffmpeg -i INPUT -metadata:s:a:0 language=eng OUTPUT`

`-target type (output)`

指定目标文件类型（ vcd ， svcd ， dvd ， dv ， dv50 ）。 类型可能与前缀`pal-` ， `ntsc-`或`film-`使用相应的标准。所有的格式选项（比特率，编解码器，缓冲大小）都将自动设置。你仅需键入：

	`ffmpeg -i myfile.avi -target vcd /tmp/vcd.mpg`

	不过，你可以指定其他选项，只需你知道他们与标准不冲突，如：

	ffmpeg -i myfile.avi -target vcd -bf 2 /tmp/vcd.mpg

`-dframes number (output)`

设置输出数据的帧数。这是`-frames:d`的别名。

`-frames[:stream_specifier] framecount (output,per-stream)`

在`framecount`帧后停止写入流。

`-q[:stream_specifier] q (output,per-stream)`
`-qscale[:stream_specifier] q (output,per-stream)`

使用固定编码率（VBR）。`q/qscale`的意思与编解码器定义相关。如果`qscale`不与`stream_specifier`联用，那么它仅适用于视频流，这是为了保持兼容性。另外将相同的编码器参数赋给两个不同的编解码器通常并不是用户想要的，因此若需要这样的功能，可以使用流标识符(`stream_specifier`)来指定。

`-filter[:stream_specifier] filtergraph (output,per-stream)`

创建由FilterGraph指定的滤镜组并使用它。

{0}FilterGraph{/0}是作用于流的滤镜组的描述，而且必须有一个单一的输入和同一类型的数据流输出。

 
在滤镜组里，输入被关联到`in`标签 ，输出到`out`标签 。关于ffmpeg滤镜组的语法可参见ffmpeg-filters的手册。

如果你想创建具有多个输入或输出的滤镜组，参见`-filter_complex`的相关选项。

`-filter_script[:stream_specifier] filename (output,per-stream)`

