---
author: Longqi
comments: true
date: 2014-12-26 12:53:27
layout: post
slug: ffmpegdoc2
title: ffmpeg的中文文档（二）
categories: [Tools]
tags:
- ffmpeg
- Documents
---
**由于内容长度过长，第一部分的内容，[点此查看]({% post_url 2014-12-23-ffmpegdoc %})。**

### 5.3 AVOption选项

这些选项直接由`libavformat`，`libavdevice`和`libavcodec`库提供。要查看可用AVOption的列表，请使用`-help`选项。它们被分为两类：

generic
	这些选项可以为任何容器，编解码器或设备进行设置。通用的选项都列在AVFormatContext选择容器/设备和AVCodecContext选择编解码器小节。

private
	这些选项是作用于给定的容器，装置或编解码器。私有选项列在其相应的容器/设备/编解码器。

比如编辑ID3v2.3头而不是默认的ID3v2.4到MP3文件，使用MP3混合器的`id3v2_version`私有选项：

`ffmpeg -i input.flac -id3v2_version 3 out.mp3`

所有编解码器AVOption选项是按流指定的，并且因此应该指定相应的流标识符。

注： `-nooption`语法不能用于布尔AVOption选项，请使用`-option 0/-option 1` 。

注：老的前缀v/a/s的流标识记号已经过时，将被移除。

### 5.4 主要选项

`-f fmt (input/output)`

强制指定输入或输出的文件格式。输入文件的格式通常是自动检测的，输出文件的格式由该文件的扩展名猜测，所以在大多数情况下不需要此选项。

`-i filename (input)`

输入的文件名

`-y (global)`

直接覆盖输出文件。

`-n (global)`

如果指定的输出文件已经存在，不要覆盖输出文件，并立即退出。

`-c[:stream_specifier] codec (input/output,per-stream)`

`-codec[:stream_specifier] codec (input/output,per-stream)`

用于对一个或多个数据流指定一个编码器（一个输出文件之前使用时）或一个解码器（一个输入文件之前使用时）。 codec是一个解码器/编码器的名称或特殊值copy （仅输出），copy表示该流不是被重新编码。

例如

	`ffmpeg -i INPUT -map 0 -c:v libx264 -c:a copy OUTPUT`
	使用libx264编码所有视频流并拷贝所有音频流。

对于每个数据流，最后匹配的`c`选项被应用，所以

	`ffmpeg -i INPUT -map 0 -c copy -c:v:1 libx264 -c:a:137 libvorbis OUTPUT`
	将复制的所有流除了第二视频流，并将用libx264进行编码，并且对于第138个音频流用libvorbis进行编码。

`-t duration (input/output)`

当作为输入选项（在`-i`之前 ），限制从输入文件中读取数据的`duration`。

当作为输出选项（输出文件名之​​前）使用，在达到`duration`后停止写入输出文件。

`duration`可能是以秒为单位，或以`hh:mm:ss[.xxx]`形式出现。

`-to`和`-t`是相互排斥的，`-t`具有优先权。

`-to position (output)`

在`position`位置停止输出。 `position`可能是一个表示秒数的数，或`hh:mm:ss[.xxx]`形式。

`-to`和`-t`是相互排斥的，`-t`具有优先权。

`-fs limit_size (output)`

设置文件大小限制，以字节表示。

`-ss position (input/output)`

当用作输入选项一起使用（在`-i` 以前），跳转到输入文件中`position` 位置。请注意，在大多数的格式是不可能确切定位，这样ffmpeg将寻求最接近的`position`位置点。当转码和`-accurate_seek`启用（默认设置），寻找点和`position`位置之间的附加段将被解码并丢弃。当进行流复制或当`-noaccurate_seek`被使用时，它都将被保留。

当用作输出选项（在输出文件名​​前），解码但丢弃输入直到时间戳到达的位置。

`position`位置可以是秒数或hh:mm:ss[.xxx]形式。

`-itsoffset offset (input)`

设置输入时间偏移。

`offset`必须是持续时间规范，请参阅（ffmpeg-utils）在FFmpeg-utils（1）手动的持续时间段的相关内容 。

偏移被添加到输入文件的时间戳。指定一个正偏移意味着相应流将延迟offset所指定的时间。

`-timestamp date (output)`
